{% extends "base.html" %}
{% block content %}

<!-- Role Tabs (Admin / Doctor / Patient) -->
<div class="d-flex justify-content-center mt-3">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link {% if role=='admin' %}active{% endif %}" href="{{ url_for('role_tab', role='admin', tab=tab) }}">Admin</a>
    </li>
    <li class="nav-item">
      <a class="nav-link {% if role=='doctor' %}active{% endif %}" href="{{ url_for('role_tab', role='doctor', tab=tab) }}">Doctor</a>
    </li>
    <li class="nav-item">
      <a class="nav-link {% if role=='patient' %}active{% endif %}" href="{{ url_for('role_tab', role='patient', tab=tab) }}">Patient</a>
    </li>
  </ul>
</div>

{% if role=='patient' %}
<!-- Login / Register Tabs -->
<div class="d-flex justify-content-center mt-3">
  <ul class="nav nav-pills">
    <li class="nav-item">
      <a class="nav-link {% if tab=='login' %}active{% endif %}" href="{{ url_for('role_tab', role=role, tab='login') }}">Login</a>
    </li>
    <li class="nav-item">
      <a class="nav-link {% if tab=='register' %}active{% endif %}" href="{{ url_for('role_tab', role=role, tab='register') }}">Register</a>
    </li>
  </ul>
</div>
{% else %}
  {% set tab = 'login' %}
{% endif %}

<!-- Main Card (Form Box) -->
<div class="d-flex justify-content-center mt-4">
  <div class="card w-100" style="max-width:420px;">
    <div class="card-body">
      {% if tab == 'login' %}
        <h5 class="card-title">{{ role|capitalize }} Login</h5>
        <p class="text-muted small">Access your appointments and records</p>

        <form method="post" action="{{ url_for('login') }}">
          <input type="hidden" name="role" value="{{ role }}">

          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input class="form-control" id="email" name="email" type="email" placeholder="you@example.com" required>
          </div>

          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input id="password" name="password" type="password" class="form-control" placeholder="Enter password" required>
          </div>

          <div class="d-grid">
            <button class="btn btn-primary" type="submit">Login as {{ role|capitalize }}</button>
          </div>
        </form>

        <p class="text-muted small mt-3 mb-0">Demo: john@email.com / patient123</p>

      {% else %}
        <h5 class="card-title">Register as {{ role|capitalize }}</h5>

        <form method="post" action="{{ url_for('register') }}">
          <input type="hidden" name="role" value="{{ role }}">

          <div class="mb-3">
            <label for="name" class="form-label">Full Name</label>
            <input id="name" name="name" type="text" class="form-control" placeholder="Your full name" required>
          </div>

          <div class="mb-3">
            <label for="email_reg" class="form-label">Email</label>
            <input id="email_reg" name="email" type="email" class="form-control" placeholder="you@example.com" required>
          </div>

          <div class="mb-3">
            <label for="password_reg" class="form-label">Password</label>
            <input id="password_reg" name="password" type="password" class="form-control" placeholder="Create a password" required>
          </div>

          <div class="mb-3">
            <label for="phone_reg" class="form-label">Phone Number</label>
            <input id="phone_reg" name="phone" type="tel" class="form-control" pattern="[0-9]{10}" placeholder="10 digit phone number" required>
          </div>

          <div class="mb-3">
            <label for="dob_reg" class="form-label">Date of Birth</label>
            <input id="dob_reg" name="dob" type="date" class="form-control" required>
          </div>

          <div class="mb-3">
            <label for="address_reg" class="form-label">Address</label>
            <input id="address_reg" name="address" type="text" class="form-control" placeholder="Your address" required>
          </div>

          <div class="d-grid">
            <button class="btn btn-success" type="submit">Register</button>
          </div>
        </form>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
